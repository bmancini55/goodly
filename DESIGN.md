# Design

A general microservice architecture would have many different types of services that need to interact. Idealy, each of these service types could scale-out as needed. Additionally each service type could also listen to and respond to events generated by any service. 

![alt Basic Design](https://s3.amazonaws.com/goodly/design/goodly-basic.png)

Goodly follows this approach for building a scalable system.

##RabbitMQ

Goodly manages the complexity of creating the communication infrastructure for you using RabbitMQ.

The RabbitMQ implementation creates a central application exchange, called `app` by default. 

Each service type has it's own exchange named after the service.  The service exchanges are bound to the central application exchange via `fanout` so that all services are capable of receive any message (if they were inclined to do so).

Each service type has a queue that is named after the service.  The queue gets bound to the service's exchange via `topics` that the service listens to. This allows the individaul service-type to only receieve messages filtered to that service.  Using `prefetch` the service-types pull data from their queue in a round-robin fashion to equally distribute work between the instances of that type.

![alt Rabbit](https://s3.amazonaws.com/goodly/design/goodly-rabbit.png)
